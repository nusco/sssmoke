#!/usr/bin/env ruby
require 'sinatra/base'
require 'erb'
require 'tilt'

filename = ARGV[0] || "."
if File.directory? filename
  Class.new(Sinatra::Base) do
    set :views, filename
    get('/') { erb :index }
    get('/:page') {|page| erb page.to_sym }
    run!
  end
else
  Class.new(Sinatra::Base) do
    get('/') { Tilt::ERBTemplate.new(filename).render }
    run!
  end
end
